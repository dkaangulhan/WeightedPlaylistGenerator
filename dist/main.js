(()=>{"use strict";class e{static carousel;animation;img_selected;mouse_left_difference;current_row;constructor(){this.animation=null,this.img_selected=null,this.mouse_left_difference=0,this.current_row=0,e.carousel=this}Animate(e){null!=this.animation&&clearInterval(this.animation),"left"==e?this.ToLeft():this.ToRight()}ToLeft(){var e=document.getElementById("carousel_img1"),t=document.getElementById("carousel_img2"),n=document.getElementById("carousel_img3"),l=document.getElementById("page_indicator_1"),o=document.getElementById("page_indicator_2"),s=document.getElementById("page_indicator_3"),a=document.getElementById("page_indicator_4"),r=document.getElementById("page_indicator_5"),c=s.offsetLeft/(n.offsetLeft/10),d=document.getElementById("carousel_images").getBoundingClientRect();this.animation=setInterval((function(){if(-1*t.offsetLeft>t.offsetWidth){clearInterval(m),e.style.left=e.offsetWidth+"px",t.style.left=-1*t.offsetWidth,n.style.left=0,e.id="carousel_img3",t.id="carousel_img1",n.id="carousel_img2",l.id="page_indicator_5",o.id="page_indicator_1",s.id="page_indicator_2",a.id="page_indicator_3",r.id="page_indicator_4",l.style.left="105%",s.style.left="0",a.style.left="35%",r.style.left="70%",l.style.transform="";var g=i.current_generator.item_list.length;u.current_row++,u.current_row>g-1&&(u.current_row=0),e.src=i.current_generator.item_list[(u.current_row+1)%g].src}else e.style.left=e.offsetLeft-10+"px",t.style.left=t.offsetLeft-10+"px",n.style.left=n.offsetLeft-10+"px",l.style.left=l.offsetLeft-c+"px",o.style.left=o.offsetLeft-c+"px",s.style.left=s.offsetLeft-c+"px",a.style.left=a.offsetLeft-c+"px",r.style.left=r.offsetLeft-c+"px",u.CalculateOpacity(e,t,n,d)}));var m=this.animation,u=this;s.style.transform="rotateZ(180deg)",s.style.animationName="background_decrease",a.style.transform="rotateZ(0deg)",a.style.animationName="background_increase",this.TriggerAnim(s),this.TriggerAnim(a)}ToRight(){var e=document.getElementById("carousel_img1"),t=document.getElementById("carousel_img2"),n=document.getElementById("carousel_img3"),l=document.getElementById("page_indicator_1"),o=document.getElementById("page_indicator_2"),s=document.getElementById("page_indicator_3"),a=document.getElementById("page_indicator_4"),r=document.getElementById("page_indicator_5"),c=-1*l.offsetLeft/(-1*e.offsetLeft/10),d=document.getElementById("carousel_images").getBoundingClientRect();this.animation=setInterval((function(){if(t.offsetLeft>t.offsetWidth){clearInterval(m),e.style.left=0,t.style.left=t.offsetWidth,n.style.left=-1*e.offsetWidth+"px",e.id="carousel_img2",t.id="carousel_img3",n.id="carousel_img1",l.id="page_indicator_2",o.id="page_indicator_3",s.id="page_indicator_4",a.id="page_indicator_5",r.id="page_indicator_1",o.style.transform="",r.style.left="-35%",l.style.left="0",o.style.left="35%",s.style.left="70%";var g=i.current_generator.item_list.length;u.current_row--,u.current_row<0&&(u.current_row=g-1),n.src=i.current_generator.item_list[(g+u.current_row-1)%g].src}else e.style.left=e.offsetLeft+10+"px",t.style.left=t.offsetLeft+10+"px",n.style.left=n.offsetLeft+10+"px",l.style.left=l.offsetLeft+c+"px",o.style.left=o.offsetLeft+c+"px",s.style.left=s.offsetLeft+c+"px",a.style.left=a.offsetLeft+c+"px",r.style.left=r.offsetLeft+c+"px",u.CalculateOpacity(e,t,n,d)}));var m=this.animation,u=this;o.style.transform="rotateZ(180deg)",o.style.animationName="background_increase",s.style.transform="rotateZ(0deg)",s.style.animationName="background_decrease",this.TriggerAnim(o),this.TriggerAnim(s)}Click(e,t){null!=this.animation&&clearInterval(this.animation),this.mouse_left_difference=t.clientX-document.getElementById("carousel_img2").getBoundingClientRect().left+scrollX,this.img_selected=e;var n=this;document.body.onmousemove=function(e){n.Translate(e)},document.body.onclick=function(){n.Leave()}}Leave(){this.img_selected=null;var e=document.getElementById("carousel_img1"),t=document.getElementById("carousel_img2"),n=document.getElementById("carousel_img3");if(Math.abs(t.offsetLeft)>t.offsetWidth/4)t.offsetLeft>0?this.ToRight():this.ToLeft();else{t.style.left="0px",e.style.left=t.offsetLeft-e.offsetWidth+"px",n.style.left=t.offsetLeft+n.offsetWidth+"px";var i=document.getElementById("carousel_images").getBoundingClientRect();this.CalculateOpacity(e,t,n,i)}document.body.onmousemove=null,document.body.onclick=null}Translate(e){if(null!=this.img_selected){var t=document.getElementById("carousel_images").getBoundingClientRect(),n=e.clientX-t.left+scrollX-this.mouse_left_difference,i=document.getElementById("carousel_img1"),l=document.getElementById("carousel_img2"),o=document.getElementById("carousel_img3");i.style.left=l.offsetLeft-i.offsetWidth+"px",l.style.left=n+"px",o.style.left=l.offsetLeft+o.offsetWidth+"px",this.CalculateOpacity(i,l,o,t)}}CalculateOpacity(e,t,n,i){e.style.opacity=1/Math.abs((i.width/2-(e.offsetLeft+e.offsetWidth/2))/(screen.width/18)),t.style.opacity=1/Math.abs((i.width/2-(t.offsetLeft+t.offsetWidth/2))/(screen.width/18)),n.style.opacity=1/Math.abs((i.width/2-(n.offsetLeft+n.offsetWidth/2))/(screen.width/18))}TriggerAnim(e){e.style.display="none",e.style.display="block"}}var t=0,n=[];class i{item_list=[];playlist_length;weight_total;static current_generator;constructor(t,o,s=1,a=!1){document.getElementById("presentation_ul").innerHTML="",this.playlist_length=t,this.weight_total=o;for(var r=[],c=0;c<n.length;c++)r.push(new l(n[c].domObject,null,n[c].weight));for(c=0;c<s;c++){this.CreateList(n,a);for(var d=0;d<n.length;d++)r[d].itemCreated+=n[d].itemCreated,n[d].itemCreated=0;if(i.current_generator=this,a){var m=document.getElementById("carousel_img1"),u=document.getElementById("carousel_img2"),g=document.getElementById("carousel_img3"),f=this.item_list.length;e.carousel.current_row=0,m.src=i.current_generator.item_list[(f+e.carousel.current_row-1)%f].src,u.src=i.current_generator.item_list[e.carousel.current_row].src,g.src=i.current_generator.item_list[(e.carousel.current_row+1)%f].src}else this.item_list=[]}for(console.log("Total elements created: "+t*s),console.log("Total test covered: "+s),c=0;c<r.length;c++)console.log(r[c].domObject.id+"--\x3e Weight: "+r[c].weight/this.weight_total+" Result Weight: "+r[c].itemCreated/(t*s));console.log("---------------------------------")}CreateList(e,t){for(var n=[],i=0;i<e.length;i++)for(var l=e[i].weight/this.weight_total*100,o=0;o<l;o++)n.push(e[i]);var a=null,r=s(0,n.length);for(i=0;i<this.playlist_length-1;i++){for(;n[r].domObject==a;)r=s(0,n.length);this.item_list.push(n[r]),a=n[r].domObject,n[r].itemCreated++}for(r=s(0,n.length);n[r].domObject==a||n[r].domObject==this.item_list[0].domObject;)r=s(0,n.length);this.item_list.push(n[r]),n[r].itemCreated++;var c=[],d=[];for(i=0;i<e.length;i++)if(e[i].itemCreated/this.item_list.length<e[i].weight/this.weight_total){var m=e[i].weight/this.weight_total-e[i].itemCreated/this.item_list.length;for(m*=this.playlist_length,o=0;o<m;o++)c.push(e[i])}else for(m=e[i].itemCreated/this.item_list.length-e[i].weight/this.weight_total,m*=this.playlist_length,o=0;o<m;o++)d.push(e[i]);var u=c.length>d.length?d.length:c.length;for(i=0;i<u;i++)for(o=1;o<this.item_list.length-1;o++)if(this.item_list[o]==d[i]&&c[i]!=this.item_list[o-1]&&c[i]!=this.item_list[o+1]){this.item_list[o]=c[i],c[i].itemCreated++,d[i].itemCreated--;break}for(i=0;i<this.item_list.length-1;i++)this.item_list[i]==this.item_list[i+1]&&console.log("ERROR!!");if(t)for(i=0;i<this.item_list.length;i++){var g=document.createElement("li");g.innerHTML="<a>"+document.getElementById(this.item_list[i].domObject.id+"_name").innerHTML+"</a>",document.getElementById("presentation_ul").appendChild(g)}document.getElementById("generator_page").style.display="none",document.getElementById("presentation_page").style.display="block"}}class l{domObject;src;weight;itemCreated;constructor(e,t,n=0){this.domObject=e,this.src=t,this.weight=n,this.itemCreated=0}static DeleteItem(e){for(var t=0;t<n.length;t++)if(n[t].domObject.id==e){var i=n[n.length-1];n[n.length-1]=n[t],n[t]=i,n[n.length-1].domObject.remove(),n.pop();break}}static FindItem(e){for(var t=0;t<n.length;t++)if(n[t].domObject.id==e)return n[t];return null}}var o=null;function s(e,t){var n=t-e;return e+Math.floor(Math.random()*n)}function a(e){document.getElementById(e).style.display="none"}function r(){document.getElementById("weight_text").innerText=document.getElementById("item_weight").value}function c(e=""){document.getElementById("item_edit_panel").style.display="block",o=null;var t="",n="",i=1;if(""!=e){var s=l.FindItem(e);null!=s&&(o=s,t=document.getElementById(s.domObject.id+"_name").innerText,n=s.src,i=s.weight)}document.getElementById("item_name").value=t,document.getElementById("item_src").value=n,document.getElementById("item_weight").value=i,r()}document.getElementById("generate_button").onclick=function(){for(var e=-1,l=0,o=parseFloat(document.getElementById("generate_panel_item_count").value),s=0;s<n.length;s++)l+=n[s].weight,n[s].weight>e&&(e=n[s].weight);var a=l;e*=o/l,(l=o)%2==1&&l++,e/l<=.5&&t>0?(new i(o,a,1e4),new i(o,a,1,!0)):alert("Playlist couldn't be generated because of the inappropriate weight selection!")},document.getElementById("close_generate_box_button").onclick=function(){a("generate_panel")},document.getElementById("item_weight").onclick=r,document.getElementById("add_item_button").onclick=function(){var e=document.getElementById("item_name").value,i=document.getElementById("item_src").value,s=parseFloat(document.getElementById("item_weight").value);if(null==o){var a=document.createElement("li");a.id="item_"+t,a.classList.add(["item"]),a.innerHTML='<a id="'+a.id+'_name"  class="item_properties">'+e+'</a><a class="seperator"></a><div style="height: 100%; position: absolute; top: 0; left: 30%;"><a class="item_properties">weight: </a><a id="'+a.id+'_weight" class="item_properties">'+s+"</a></div>";var r=document.createElement("button");r.classList.add("generator_button","button_hover","button_red"),r.innerHTML="Delete",r.onclick=function(){l.DeleteItem(a.id)},a.appendChild(r);var d=document.createElement("button");d.classList.add("generator_button","button_hover"),d.innerHTML="Edit",d.onclick=function(){c(a.id)},a.appendChild(d),document.getElementById("generated_item_list").appendChild(a),n.push(new l(a,i,s)),t++}else document.getElementById(o.domObject.id+"_name").innerText=e,document.getElementById(o.domObject.id+"_weight").innerText=s,o.weight=s,o.src=i;document.getElementById("item_edit_panel").style.display="none"},document.getElementById("close_edit_panel_button").onclick=function(){a("item_edit_panel")},document.getElementById("open_edit_panel_button").onclick=c,document.getElementById("open_generator_panel_button").onclick=function(){document.getElementById("generate_panel").style.display="block"},document.getElementById("presentation_turn_edit").onclick=function(){document.getElementById("generator_page").style.display="block",document.getElementById("presentation_page").style.display="none"},document.getElementById("presentation_list_button").onclick=function(){document.getElementById("presentation_list").style.display="block",document.getElementById("presentation_carousel").style.display="none"},document.getElementById("presentation_carousel_button").onclick=function(){document.getElementById("presentation_carousel").style.display="block",document.getElementById("presentation_list").style.display="none"},document.getElementById("carousel_img1").onmousedown=function(t){e.carousel.Click(document.getElementById("carousel_img1"),t)},document.getElementById("carousel_img2").onmousedown=function(t){e.carousel.Click(document.getElementById("carousel_img2"),t)},document.getElementById("carousel_img3").onmousedown=function(t){e.carousel.Click(document.getElementById("carousel_img3"),t)},document.getElementById("carousel_left_button").onclick=function(){e.carousel.Animate("left")},document.getElementById("carousel_right_button").onclick=function(){e.carousel.Animate("right")},new e})();