(()=>{"use strict";class e{static carousel;animation;img_selected;mouse_left_difference;current_row;constructor(){this.animation=null,this.img_selected=null,this.mouse_left_difference=0,this.current_row=0,e.carousel=this}Animate(e){null!=this.animation&&clearInterval(this.animation),"left"==e?this.ToLeft():this.ToRight()}ToLeft(){var e=document.getElementById("carousel_img1"),t=document.getElementById("carousel_img2"),n=document.getElementById("carousel_img3"),l=document.getElementById("carousel_images").getBoundingClientRect();this.animation=setInterval((function(){if(-1*t.offsetLeft>t.offsetWidth){clearInterval(o),e.style.left=e.offsetWidth+"px",t.style.left=-1*t.offsetWidth,n.style.left=0,e.id="carousel_img3",t.id="carousel_img1",n.id="carousel_img2";var s=i.current_generator.item_list.length;r.current_row-=1,r.current_row<0&&(r.current_row=s-1),n.src=i.current_generator.item_list[r.current_row].src,t.src=i.current_generator.item_list[(s+r.current_row-1)%s].src,e.src=i.current_generator.item_list[(r.current_row+1)%s].src,document.getElementById("carousel_playlist_element").innerHTML=r.current_row}else r.CalculateOpacity(e,t,n,l),e.style.left=e.offsetLeft-15+"px",t.style.left=t.offsetLeft-15+"px",n.style.left=n.offsetLeft-15+"px"}));var o=this.animation,r=this}ToRight(){var e=document.getElementById("carousel_img1"),t=document.getElementById("carousel_img2"),n=document.getElementById("carousel_img3"),l=document.getElementById("carousel_images").getBoundingClientRect();this.animation=setInterval((function(){if(t.offsetLeft>t.offsetWidth){clearInterval(o),e.style.left=0,t.style.left=t.offsetWidth,n.style.left=-1*e.offsetWidth+"px",e.id="carousel_img2",t.id="carousel_img3",n.id="carousel_img1",r.current_row+=1,r.current_row>i.current_generator.item_list.length-1&&(r.current_row=0);var s=i.current_generator.item_list.length;e.src=i.current_generator.item_list[r.current_row].src,t.src=i.current_generator.item_list[(r.current_row+1)%s].src,n.src=i.current_generator.item_list[(s+r.current_row-1)%s].src,document.getElementById("carousel_playlist_element").innerHTML=r.current_row}else r.CalculateOpacity(e,t,n,l),e.style.left=e.offsetLeft+15+"px",t.style.left=t.offsetLeft+15+"px",n.style.left=n.offsetLeft+15+"px"}));var o=this.animation,r=this}CalculateOpacity(e,t,n,i){e.style.opacity=1/Math.abs((i.width/2-(e.offsetLeft+e.offsetWidth/2))/(screen.width/18)),t.style.opacity=1/Math.abs((i.width/2-(t.offsetLeft+t.offsetWidth/2))/(screen.width/18)),n.style.opacity=1/Math.abs((i.width/2-(n.offsetLeft+n.offsetWidth/2))/(screen.width/18))}Click(e,t){null!=this.animation&&clearInterval(this.animation),this.mouse_left_difference=t.clientX-document.getElementById("carousel_img2").getBoundingClientRect().left+scrollX,this.img_selected=e}Leave(){this.img_selected=null;var e=document.getElementById("carousel_img1"),t=document.getElementById("carousel_img2"),n=document.getElementById("carousel_img3");Math.abs(t.offsetLeft)>t.offsetWidth/4?t.offsetLeft>0?this.ToRight():this.ToLeft():(t.style.left="0px",e.style.left=t.offsetLeft-e.offsetWidth+"px",n.style.left=t.offsetLeft+n.offsetWidth+"px")}Translate(e){if(null!=this.img_selected){var t=document.getElementById("carousel_images").getBoundingClientRect(),n=e.clientX-t.left+scrollX-this.mouse_left_difference,i=document.getElementById("carousel_img1"),l=document.getElementById("carousel_img2"),o=document.getElementById("carousel_img3");i.style.left=l.offsetLeft-i.offsetWidth+"px",l.style.left=n+"px",o.style.left=l.offsetLeft+o.offsetWidth+"px",this.CalculateOpacity(i,l,o,t)}}}var t=0,n=[];class i{item_list=[];playlist_length;weight_total;static current_generator;constructor(t,o,r=1,s=!1){document.getElementById("presentation_ul").innerHTML="",this.playlist_length=t,this.weight_total=o;for(var c=[],a=0;a<n.length;a++)c.push(new l(n[a].domObject,null,n[a].weight));for(a=0;a<r;a++){this.CreateList(n,s);for(var m=0;m<n.length;m++)c[m].itemCreated+=n[m].itemCreated,n[m].itemCreated=0;if(i.current_generator=this,s){var d=document.getElementById("carousel_img1"),u=document.getElementById("carousel_img2"),g=document.getElementById("carousel_img3"),_=this.item_list.length;e.carousel.current_row=0,d.src=i.current_generator.item_list[(_+e.carousel.current_row-1)%_].src,u.src=i.current_generator.item_list[e.carousel.current_row].src,g.src=i.current_generator.item_list[(e.carousel.current_row+1)%_].src}else this.item_list=[]}for(console.log("Total elements created: "+t*r),console.log("Total test covered: "+r),a=0;a<c.length;a++)console.log(c[a].domObject.id+"--\x3e Weight: "+c[a].weight/this.weight_total+" Result Weight: "+c[a].itemCreated/(t*r));console.log("---------------------------------")}CreateList(e,t){for(var n=[],i=0;i<e.length;i++)for(var l=e[i].weight/this.weight_total*100,o=0;o<l;o++)n.push(e[i]);var s=null;for(i=0;i<this.playlist_length;i++){for(var c=r(0,n.length);n[c].domObject==s;)c=r(0,n.length);this.item_list.push(n[c]),s=n[c].domObject,n[c].itemCreated++}var a=[],m=[];for(i=0;i<e.length;i++)if(e[i].itemCreated/this.item_list.length<e[i].weight/this.weight_total){var d=e[i].weight/this.weight_total-e[i].itemCreated/this.item_list.length;for(d*=this.playlist_length,o=0;o<d;o++)a.push(e[i])}else for(d=e[i].itemCreated/this.item_list.length-e[i].weight/this.weight_total,d*=this.playlist_length,o=0;o<d;o++)m.push(e[i]);var u=a.length>m.length?m.length:a.length;for(i=0;i<u;i++)for(o=1;o<this.item_list.length-1;o++)if(this.item_list[o]==m[i]&&a[i]!=this.item_list[o-1]&&a[i]!=this.item_list[o+1]){this.item_list[o]=a[i],a[i].itemCreated++,m[i].itemCreated--;break}for(i=0;i<this.item_list.length-1;i++)this.item_list[i]==this.item_list[i+1]&&console.log("ERROR!!");if(t)for(i=0;i<this.item_list.length;i++){var g=document.createElement("li");g.innerHTML="<a>"+document.getElementById(this.item_list[i].domObject.id+"_name").innerHTML+"</a>",document.getElementById("presentation_ul").appendChild(g)}document.getElementById("generator_page").style.display="none",document.getElementById("presentation_page").style.display="block"}}class l{domObject;src;weight;itemCreated;constructor(e,t,n=0){this.domObject=e,this.src=t,this.weight=n,this.itemCreated=0}static DeleteItem(e){for(var t=0;t<n.length;t++)if(n[t].domObject.id==e){var i=n[n.length-1];n[n.length-1]=n[t],n[t]=i,n[n.length-1].domObject.remove(),n.pop();break}}static FindItem(e){for(var t=0;t<n.length;t++)if(n[t].domObject.id==e)return n[t];return null}}var o=null;function r(e,t){var n=t-e;return e+Math.floor(Math.random()*n)}function s(e){document.getElementById(e).style.display="none"}function c(){document.getElementById("weight_text").innerText=document.getElementById("item_weight").value}function a(e=""){document.getElementById("item_edit_panel").style.display="block",o=null;var t="",n="",i=1;if(""!=e){var r=l.FindItem(e);null!=r&&(o=r,t=document.getElementById(r.domObject.id+"_name").innerText,n=r.src,i=r.weight)}document.getElementById("item_name").value=t,document.getElementById("item_src").value=n,document.getElementById("item_weight").value=i,c()}document.getElementById("generate_button").onclick=function(){for(var e=-1,l=0,o=parseFloat(document.getElementById("generate_panel_item_count").value),r=0;r<n.length;r++)l+=n[r].weight,n[r].weight>e&&(e=n[r].weight);var s=l;e*=o/l,(l=o)%2==1&&l++,e/l<=.5&&t>0?(new i(o,s,1e4),new i(o,s,1,!0),alert("Created..")):alert("Playlist couldn't be generated because of the inappropriate weight selection!")},document.getElementById("close_generate_box_button").onclick=function(){s("generate_panel")},document.getElementById("item_weight").onclick=c,document.getElementById("add_item_button").onclick=function(){var e=document.getElementById("item_name").value,i=document.getElementById("item_src").value,r=parseFloat(document.getElementById("item_weight").value);if(null==o){var s=document.createElement("li");s.id="item_"+t,s.classList.add(["item"]),s.innerHTML='<a id="'+s.id+'_name"  class="item_properties">'+e+'</a><a class="seperator"></a><div style="height: 100%; position: absolute; top: 0; left: 30%;"><a class="item_properties">weight: </a><a id="'+s.id+'_weight" class="item_properties">'+r+"</a></div>";var c=document.createElement("button");c.classList.add("generator_button","button_hover","button_red"),c.innerHTML="Delete",c.onclick=function(){l.DeleteItem(s.id)},s.appendChild(c);var m=document.createElement("button");m.classList.add("generator_button","button_hover"),m.innerHTML="Edit",m.onclick=function(){a(s.id)},s.appendChild(m),document.getElementById("generated_item_list").appendChild(s),n.push(new l(s,i,r)),t++}else document.getElementById(o.domObject.id+"_name").innerText=e,document.getElementById(o.domObject.id+"_weight").innerText=r,o.weight=r,o.src=i;document.getElementById("item_edit_panel").style.display="none"},document.getElementById("close_edit_panel_button").onclick=function(){s("item_edit_panel")},document.getElementById("open_edit_panel_button").onclick=a,document.getElementById("open_generator_panel_button").onclick=function(){document.getElementById("generate_panel").style.display="block"},document.getElementById("presentation_turn_edit").onclick=function(){document.getElementById("generator_page").style.display="block",document.getElementById("presentation_page").style.display="none"},document.getElementById("presentation_list_button").onclick=function(){document.getElementById("presentation_list").style.display="block",document.getElementById("presentation_carousel").style.display="none"},document.getElementById("presentation_carousel_button").onclick=function(){document.getElementById("presentation_carousel").style.display="block",document.getElementById("presentation_list").style.display="none"},document.getElementById("carousel_img1").onmousedown=function(t){e.carousel.Click(document.getElementById("carousel_img1"),t)},document.getElementById("carousel_img2").onmousedown=function(t){e.carousel.Click(document.getElementById("carousel_img2"),t)},document.getElementById("carousel_img3").onmousedown=function(t){e.carousel.Click(document.getElementById("carousel_img3"),t)},document.getElementById("carousel_left_button").onclick=function(t){e.carousel.Animate("left",t)},document.getElementById("carousel_right_button").onclick=function(t){e.carousel.Animate("right",t)},new e})();