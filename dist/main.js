(()=>{"use strict";var e=0,t=[];class n{item_list=[];playlist_length;weight_total;constructor(e,n,l=1,o=!1){document.getElementById("presentation_ul").innerHTML="",this.playlist_length=e,this.weight_total=n;for(var a=[],d=0;d<t.length;d++)a.push(new i(t[d].domObject,null,t[d].weight));for(d=0;d<l;d++){this.CreateList(t,o);for(var m=0;m<t.length;m++)a[m].itemCreated+=t[m].itemCreated,t[m].itemCreated=0;this.item_list=[]}for(console.log("Total elements created: "+e*l),console.log("Total test covered: "+l),d=0;d<a.length;d++)console.log(a[d].domObject.id+"--\x3e Weight: "+a[d].weight/this.weight_total+" Result Weight: "+a[d].itemCreated/(e*l));console.log("---------------------------------")}CreateList(e,t){for(var n=[],i=0;i<e.length;i++)for(var l=e[i].weight/this.weight_total*100,a=0;a<l;a++)n.push(e[i]);var d=null;for(i=0;i<this.playlist_length;i++){for(var m=o(0,n.length);n[m].domObject==d;)m=o(0,n.length);this.item_list.push(n[m]),d=n[m].domObject,n[m].itemCreated++}var s=[],r=[];for(i=0;i<e.length;i++)if(e[i].itemCreated/this.item_list.length<e[i].weight/this.weight_total){var c=e[i].weight/this.weight_total-e[i].itemCreated/this.item_list.length;for(c*=this.playlist_length,a=0;a<c;a++)s.push(e[i])}else for(c=e[i].itemCreated/this.item_list.length-e[i].weight/this.weight_total,c*=this.playlist_length,a=0;a<c;a++)r.push(e[i]);var g=s.length>r.length?r.length:s.length;for(i=0;i<g;i++)for(a=1;a<this.item_list.length-1;a++)if(this.item_list[a]==r[i]&&s[i]!=this.item_list[a-1]&&s[i]!=this.item_list[a+1]){this.item_list[a]=s[i],s[i].itemCreated++,r[i].itemCreated--;break}for(i=0;i<this.item_list.length-1;i++)this.item_list[i]==this.item_list[i+1]&&console.log("ERROR!!");if(t)for(i=0;i<this.item_list.length;i++){var h=document.createElement("li");h.innerHTML="<a>"+document.getElementById(this.item_list[i].domObject.id+"_name").innerHTML+"</a>",document.getElementById("presentation_ul").appendChild(h)}document.getElementById("generator_page").style.display="none",document.getElementById("presentation_page").style.display="block"}}class i{domObject;src;weight;itemCreated;constructor(e,t,n=0){this.domObject=e,this.src=t,this.weight=n,this.itemCreated=0}static DeleteItem(e){for(var n=0;n<t.length;n++)if(t[n].domObject.id==e){var i=t[t.length-1];t[t.length-1]=t[n],t[n]=i,t[t.length-1].domObject.remove(),t.pop();break}}static FindItem(e){for(var n=0;n<t.length;n++)if(t[n].domObject.id==e)return t[n];return null}}var l=null;function o(e,t){var n=t-e;return e+Math.floor(Math.random()*n)}function a(e){document.getElementById(e).style.display="none"}function d(){document.getElementById("weight_text").innerText=document.getElementById("item_weight").value}function m(e=""){document.getElementById("item_edit_panel").style.display="block",l=null;var t="",n="",o=1;if(""!=e){var a=i.FindItem(e);null!=a&&(l=a,t=document.getElementById(a.domObject.id+"_name").innerText,n=a.src,o=a.weight)}document.getElementById("item_name").value=t,document.getElementById("item_src").value=n,document.getElementById("item_weight").value=o,d()}document.getElementById("generate_button").onclick=function(){for(var i=-1,l=0,o=parseFloat(document.getElementById("generate_panel_item_count").value),a=0;a<t.length;a++)l+=t[a].weight,t[a].weight>i&&(i=t[a].weight);var d=l;i*=o/l,(l=o)%2==1&&l++,i/l<=.5&&e>0?(new n(o,d,1e4),new n(o,d,1,!0),alert("Created..")):alert("Playlist couldn't be generated because of the inappropriate weight selection!")},document.getElementById("close_generate_box_button").onclick=function(){a("generate_panel")},document.getElementById("item_weight").onclick=d,document.getElementById("add_item_button").onclick=function(){var n=document.getElementById("item_name").value,o=document.getElementById("item_src").value,a=parseFloat(document.getElementById("item_weight").value);if(null==l){var d=document.createElement("li");d.id="item_"+e,d.classList.add(["item"]),d.innerHTML='<a id="'+d.id+'_name"  class="item_properties">'+n+'</a><a class="seperator"></a><div style="height: 100%; position: absolute; top: 0; left: 30%;"><a class="item_properties">weight: </a><a id="'+d.id+'_weight" class="item_properties">'+a+"</a></div>";var s=document.createElement("button");s.classList.add("generator_button","button_hover","button_red"),s.innerHTML="Delete",s.onclick=function(){i.DeleteItem(d.id)},d.appendChild(s);var r=document.createElement("button");r.classList.add("generator_button","button_hover"),r.innerHTML="Edit",r.onclick=function(){m(d.id)},d.appendChild(r),document.getElementById("generated_item_list").appendChild(d),t.push(new i(d,o,a)),e++}else document.getElementById(l.domObject.id+"_name").innerText=n,document.getElementById(l.domObject.id+"_weight").innerText=a,l.weight=a,l.src=o;document.getElementById("item_edit_panel").style.display="none"},document.getElementById("close_edit_panel_button").onclick=function(){a("item_edit_panel")},document.getElementById("open_edit_panel_button").onclick=m,document.getElementById("open_generator_panel_button").onclick=function(){document.getElementById("generate_panel").style.display="block"},document.getElementById("presentation_turn_edit").onclick=function(){document.getElementById("generator_page").style.display="block",document.getElementById("presentation_page").style.display="none"}})();